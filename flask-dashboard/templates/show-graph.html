{% extends "default.html" %}
{% block content %}
    <header>
        <h1>{{ rule.endpoint }}</h1>
        <p>A dashboard for automatic monitoring of python web services</p>
    </header>

    <h2>Summary</h2>
    <table>
        <tr>
            <td><b>Endpoint</b></td>
            <td>{{ rule.endpoint }}</td>
        </tr>
        <tr>
            <td><b>Added since version: </b></td>
            <td>{{ rule.version_added }}</td>
        </tr>
        <tr>
            <td><b>Date added: </b></td>
            <td>{{ "{:%Y-%m-%d %H:%M:%S }".format(rule.time_added) }}</td>
        </tr>
        {% if url %}
            <tr>
                <td><b>Url: </b></td>
                <td><a href="{{ url }}">{{ url }}</a></td>
            </tr>
        {% endif %}
        <tr>
            <td><b>Last accessed: </b></td>
            <td>{{ "{:%Y-%m-%d %H:%M:%S }".format(rule.last_accessed) }}</td>
        </tr>
    </table>
    <br/>

    <h2>Execution time (in ms) per hour</h2>
    <div class="container" align="left">
        <embed type="image/svg+xml" src={{ times_data|safe }} style='max-width:1000px'></embed>
    </div> <br/>

    <h2>Number of hits per hour</h2>
    <div class="container" align="left">
        <embed type="image/svg+xml" src={{ hits_data|safe }} style='max-width:1000px'></embed>
    </div> <br/>

    <h2>Execution time (in ms) per version per user</h2>
    <div class="container" align="left">
        <embed type="image/svg+xml" src={{ dot_chart_user|safe }} style='max-width:1000px'></embed>
    </div> <br/>

    <h2>Execution time (in ms) per version per ip</h2>
    <div class="container" align="left">
        <embed type="image/svg+xml" src={{ dot_chart_ip|safe }} style='max-width:1000px'></embed>
    </div> <br/>
{% endblock %}